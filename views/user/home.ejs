<%- include('../partials/user/header') %>
<main>
  <link rel="stylesheet" href="/assets/user-style/home.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

  <div class="content">
    <section class="hero">
      <img src="/assets/img/hp-register--fitpro-solo3.png.large.2x.png" alt="Floating PNG" />
      <div>
        <h1>Welcome to SoundZone</h1>
        <p>Experience the ultimate sound like never before.</p>
      </div>
    </section>

    <!-- New Arrivals -->
    <section class="new-arrivals">
      <div class="container">
        <h2 class="section-title">New Arrivals</h2>
        <div class="product-grid">
          <% for (let i = Math.max(products.length - 4, 0); i < products.length; i++) { %>
            <div class="product-card"><a href="/productDetails?id=<%= products[i]._id %>">
              <img src="<%= products[i].productImage[0] %>" alt="<%= products[i].productName %>">
              <div class="product-info">
                <h3><%= products[i].productName %></h3>
                <div class="pricing-container">
                  <div class="price-block">
                    <span class="product-price final-price">₹<%= products[i].finalPrice.toFixed(2) %></span>
                    <% if (products[i].bestOffer) { %>
                      <span class="product-price original-price">₹<%= products[i].salePrice %></span>
                    <% } %>
                  </div>
                  <% if (products[i].bestOffer) { %>
                    <span class="offer-label">
                      -<%= products[i].bestOffer.discountPercentage %>%
                    </span>
                  <% } %>
                </div>
              </div>
            </a>
            </div>
            
          <% } %>
        </div>
      </div>
    </section>

    <!-- Popular Items -->
    <section class="popular-items">
      <div class="container">
        <h2 class="section-title">Popular Items</h2>
        <p class="section-description">Discover our most loved products, chosen by customers like you.</p>
        <div class="product-grid">
          <% for (let i = 0; i < products.length; i++) { %>
            <div class="product-card">
              <div class="product-image">
                <a href="/productDetails?id=<%= products[i]._id %>">
                  <img src="<%= products[i].productImage[0] %>" alt="<%= products[i].productName %>">
                </a>
                <button class="wishlist-btn" data-product-id="<%= products[i]._id %>">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
                       viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                       stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
                       class="heart-icon">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                  </svg>
                </button>
              </div>
              <div class="product-info">
                <h3 class="product-name">
                  <%= products[i].productName %>
                </h3>
                <div class="pricing-container">
                  <div class="price-block">
                    <span class="product-price final-price">₹<%= products[i].finalPrice.toFixed(2) %></span>
                    <% if (products[i].bestOffer) { %>
                      <span class="product-price original-price">₹<%= products[i].salePrice %></span>
                    <% } %>
                  </div>
                  <% if (products[i].bestOffer) { %>
                    <span class="offer-label">
                      -<%= products[i].bestOffer.discountPercentage %>%
                    </span>
                  <% } %>
                </div>
              </div>
              <div class="product-actions">
                <button class="add-to-cart" data-product-id="<%= products[i]._id %>" data-price="<%= products[i].finalPrice %>">
                  Add to cart
                </button>
              </div>
            </div>
          <% } %>
        </div>
      </div>
    </section>
  </div>

  <!-- Toast Container -->
  <div class="toast-container"></div>
  <%- include('../partials/user/footer') %>
 
  <script src="/js/global.js"></script>
</main>

